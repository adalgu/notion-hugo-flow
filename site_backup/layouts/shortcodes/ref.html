{{ $targetPath := .Get 0 }}
{{ $fallbackURL := "/" }}

{{ if not $targetPath }}
  {{ errorf "Missing target path in ref shortcode. Example usage: {{< ref \"post/my-post.md\" >}}" }}
{{ end }}

{{ $permalink := "" }}
{{ with .Page.Site.GetPage $targetPath }}
  {{ $permalink = .Permalink }}
{{ else }}
  {{ $permalink = $fallbackURL }}
{{ end }}

{{ $permalink }}
