<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 | My Blog</title>
<meta name="keywords" content="Python, openapi, opendata">
<meta name="description" content="공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.



오늘은 서울시 공공데이터 포털인 &lsquo;서울 열린데이터 광장&rsquo;
에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.

참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 &lsquo;공공데이터포털&rsquo;
도 있고, 통계청에서 운영하는 Kosis 공유서비스
, 한국은행 Ecos
 등등 엄청 많다.">
<meta name="author" content="Gunn Kim">
<link rel="canonical" href="//localhost:1313/posts/2020-06-13-seoul-metro-data-openapi/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.css" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="//localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="//localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/posts/2020-06-13-seoul-metro-data-openapi/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>

(function() {
    const currentPath = window.location.pathname;
    
    
    if (currentPath.startsWith('/post/') && !currentPath.startsWith('/posts/')) {
        const newPath = currentPath.replace('/post/', '/posts/');
        const newUrl = window.location.origin + newPath + window.location.search + window.location.hash;
        
        
        window.location.replace(newUrl);
    }
    
    
    if (currentPath === '/archives' || currentPath === '/archives/') {
        window.location.replace(window.location.origin + '/posts/');
    }
})();
</script>



<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-BQ6CZ7HMQK"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-BQ6CZ7HMQK");
</script>
<script
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3695098602071408"
  crossorigin="anonymous"
></script>
<meta property="og:url" content="//localhost:1313/posts/2020-06-13-seoul-metro-data-openapi/">
  <meta property="og:site_name" content="My Blog">
  <meta property="og:title" content="[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기">
  <meta property="og:description" content="공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.
오늘은 서울시 공공데이터 포털인 ‘서울 열린데이터 광장’ 에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.
참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 ‘공공데이터포털’ 도 있고, 통계청에서 운영하는 Kosis 공유서비스 , 한국은행 Ecos 등등 엄청 많다.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-06-13T21:36:00+09:00">
    <meta property="article:modified_time" content="2025-06-20T23:12:00+00:00">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Openapi">
    <meta property="article:tag" content="Opendata">
      <meta property="og:image" content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name="twitter:title" content="[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기">
<meta name="twitter:description" content="공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.



오늘은 서울시 공공데이터 포털인 &lsquo;서울 열린데이터 광장&rsquo;
에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.

참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 &lsquo;공공데이터포털&rsquo;
도 있고, 통계청에서 운영하는 Kosis 공유서비스
, 한국은행 Ecos
 등등 엄청 많다.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "//localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기",
      "item": "//localhost:1313/posts/2020-06-13-seoul-metro-data-openapi/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기",
  "name": "[파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기",
  "description": "공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.\n오늘은 서울시 공공데이터 포털인 \u0026lsquo;서울 열린데이터 광장\u0026rsquo; 에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.\n참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 \u0026lsquo;공공데이터포털\u0026rsquo; 도 있고, 통계청에서 운영하는 Kosis 공유서비스 , 한국은행 Ecos 등등 엄청 많다.\n",
  "keywords": [
    "Python", "openapi", "opendata"
  ],
  "articleBody": "공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.\n오늘은 서울시 공공데이터 포털인 ‘서울 열린데이터 광장’ 에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.\n참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 ‘공공데이터포털’ 도 있고, 통계청에서 운영하는 Kosis 공유서비스 , 한국은행 Ecos 등등 엄청 많다.\n전체 흐름은 다음과 같다.\n회원가입 및 일반인증키 신청 오픈API로 데이터 불러오기 불러온 데이터를 데이터프레임에 저장하기 for 루프문으로 원하는 기간의 데이터를 데이터프레임에 저장하기 필요한 값의 시계열만 데이터프레임에 저장하기 저장한 데이터를 시각화하기 회원가입 및 일반인증키 신청 일단 서울 열린데이터 광장에서 회원가입 후에 오픈API를 이용할 수 있는 인증키를 발급받자. 회원가입-일반인증키 신청의 2단계만 거치면 완료된다.\n서울 열린데이터 광장 : https://data.seoul.go.kr/ 오픈API로 데이터 불러오기 [참고] Colab(코랩) 파이썬 코드 예제 바로가기 :\n[파이썬/colab] 공공데이터 Open API를 이용한 지하철 승차인원 구하기 예제코드 오픈API로 데이터를 불러오기 위해서 사용할 라이브러리를 불러온다.\n1 2 3 4 import urllib.request import json import pandas as pd from pandas.io.json import json_normalize 이어서 오픈API url로 데이터를 불러온다. ‘서울 지하철호선별 역별 승하차 인원 정보’ 에 가면 샘플 url이 있는데, 이를 이용해서 원하는 날짜의 데이터를 불러올 수 있다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 기본 형태는 아래와 같다. http://openapi.seoul.go.kr:8088/(인증키)/json/CardSubwayStatsNew/1/1000/20200601 인증키에 앞서 받아온 인증키를 넣으면 된다. 인증키를 감싸고 있는 () 괄호는 빼야한다. 인증키가 123yourkeyhere라고하면, url은 아래와 같다. http://openapi.seoul.go.kr:8088/123yourkeyhere/ 인증키 다음에는 받아올 데이터의 형태를 지정하는 것인데, xml, xls, json 중에서 결정할 수 있는데, 여기서는 json을 사용하였다. http://openapi.seoul.go.kr:8088/123yourkeyhere/json/ json 다음에 있는 것이 불러올 데이터의 테이블명이다. 지하철 승하차 인원 테이블은 'CardSubwayStatsNew'이다. http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/ 테이블명 다음의 숫자 1과 숫자 1000은 한번에 불러올 데이터 행의 시작과 끝번호이다. 서울시 지하철 모든 노선의 역(서울시 소재, 2020년 6월 현재 기준)의 갯수가 589개니까 1과 1000으로 지정하면 무방하다. (참고로 서울시 열린데이터 광장의 오픈 API로 한번에 부를 수 있는 행의 수는 1000개다. 가령, 1행에서 3000행을 한번에 부르게 된다면 에러난다.) http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/ 숫자 1과 숫자 1000 다음에 나오는 날짜는 데이터를 불러올 날짜다. YYYYMMDD 형태로 불러올 수 있다. 2020년 6월 1일의 서울시 전체 지하철역 승하차 인원을 불러오기 위해서는 아래 url을 입력하면 된다. (인증키는 본인의 인증키를 입력해야 한다.) 최종 완성본 url: http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601 불러온 데이터를 데이터프레임에 저장하기 최종 완성된 url을 가지고 데이터를 불러와서 이를 다루기 쉽도록 데이터프레임에 저장해 보자. 데이터프레임을 위해서 판다스(pandas) 라이브러리는 맨 앞에서 불러왔었다.\n1 2 3 4 5 6 7 8 9 # url 변수에 최종 완성본 url을 넣자 url = \"http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601\" # url을 불러오고 이것을 인코딩을 utf-8로 전환하여 결과를 받자. response = urllib.request.urlopen(url) json_str = response.read().decode(\"utf-8\") # 받은 데이터가 문자열이라서 이를 json으로 변환한다. json_object = json.loads(json_str) 이제 json 형태로 받아진 데이터를 판다스에 저장하자. 먼저, json_object를 실행해 보면, 아래와 같이 나타난다. 위의 데이터에서 필요한 데이터는 ‘CardSubwayStatsNew’의 하위에 있는 ‘row’에 있음을 확인할 수 있다. 이제 row에 해당하는 데이터를 데이터프레임으로 불러와 보자.\n1 2 # ['CardSubwayStatsNew']['row']를 데이터프레임 df로 불러오는 것은 아래와 같다. df=pd.json_normalize(json_object['CardSubwayStatsNew']['row']) df를 부르면 아래와 같이 저장된 것을 볼 수 있다. 여기까지 한것을 한번 모아서 보자. 총 5줄이다.\n1 2 3 4 5 url = \"http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601\" response = urllib.request.urlopen(url) json_str = response.read().decode(\"utf-8\") json_object = json.loads(json_str) df=pd.json_normalize(json_object['CardSubwayStatsNew']['row']) for 루프문으로 원하는 기간의 데이터를 데이터프레임에 저장하기 지하철 이용객의 변화를 보기 위해서는 시계열을 살펴봐야 한다. 위에서 하루치 데이터를 데이터프레임으로 불러왔는데, 이것을 원하는 기간에 저장하도록 만들어 보자.\n먼저, 원하는 기간의 날짜를 리스트에 넣어야 한다. 판다스를 이용해서 간단하게 할 수 있다.\n1 2 # 2020년 1월 20일부터 2020년 2월 5일까지 데이터를 불러온다고 하자. dt_index = pd.date_range(start='20200120', end='20200205') dt_index는 아래와 같다. 이것을 리스트로 변환하자.\n1 dt_list = dt_index.strftime(\"%Y%m%d\").tolist() 결과는 아래와 같다. 이제 for 문을 날짜 리스트에 따라 돌려가며 부르면 된다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 dt_index = pd.date_range(start='20200120', end='20200205') dt_list = dt_index.strftime(\"%Y%m%d\").tolist() # for 문으로 하루치 데이터 부르는 작업을 리스트에 저장된 기간에 반복한다. # url을 바꿔가면서 데이터를 부르기 위해서 url의 끝부문 날짜에 변수 i를 넣어준다. # 불러온 데이터를 append 메소드를 이용하여 데이터프레임 하단에 붙인다. for i in dt_list: url=\"http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/\" + i response = urllib.request.urlopen(url) json_str = response.read().decode(\"utf-8\") json_object = json.loads(json_str) df_temp=pd.json_normalize(json_object['CardSubwayStatsNew']['row']) df=df.append(df_temp) [주의] for 문을 돌리기 전에 데이터를 불여넣을 데이터프레임 df를 하나 만들어 두자. 하루치 데이터를 불러온 작업을 for 문 돌리기 전에 한번 실행해 놓으면 된다. 또는 생성되는 칼럼에 맞게 하나 만들면 된다. 데이터프레임 만드는 것은 아래 섹션에 추가하였다. 이것을 안하면 df가 없다고 에러가 뜬다.\n이제 2020년 1월 20일부터 2020년 2월 5일까지 서울 지하철 이용객 수를 확인해 보자.\n데이터가 잘 불러져서 데이터프레임에 차곡차곡 쌓여있는걸 볼 수 있다.\n필요한 값의 시계열만 데이터프레임에 저장하기 하루치 데이터만 해도 500행이 넘어가니 1월 20일~2월 5일 데이터만 불러도 시간이 조금 소요된다. 그래서 위 루프문 돌릴때 필요한 노선이나 역을 기준으로 데이터를 뽑아서 저장할 수도 있고, 하루 전체 승하차 인원 합을 구해서 저장해도 된다.\n애초에 필요한 것이 노선과 역에 관계없이 서울시 지하철 하루 이용객수 추이다. 데이터프레임에 저장할 때, 하루치 인원 합을 구해서 저장해 보자.\n1 2 3 4 5 6 7 8 9 # 일간 서울시 지하철 전체 승차, 하차 인원의 합을 구하는 명령어는 다음과 같다. df_temp['RIDE_PASGR_NUM'].sum() df_temp['ALIGHT_PASGR_NUM'].sum() # 이것을 df.loc[j]를 이용해서 df라는 데이터프레임에 일별로 하나씩 차곡차곡 쌓도록 했다. df.loc[j] = [i, df_temp['RIDE_PASGR_NUM'].sum(), df_temp['ALIGHT_PASGR_NUM'].sum()] # for 루프문 돌기 전에 빈 데이터프레임을 하나 만들어줬다. df = pd.DataFrame({'DATE':[], 'RIDE':[], 'ALIGHT':[]}) 위 내용을 정리하면 다음과 같다.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 dt_index = pd.date_range(start='20200120', end='20200205') dt_list = dt_index.strftime(\"%Y%m%d\").tolist() df = pd.DataFrame({'DATE':[], 'RIDE':[], 'ALIGHT':[]}) j=1 for i in dt_list: url=\"http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/\" + i response = urllib.request.urlopen(url) json_str = response.read().decode(\"utf-8\") json_object = json.loads(json_str) pd.json_normalize(json_object['CardSubwayStatsNew']['row']) df_temp=pd.json_normalize(json_object['CardSubwayStatsNew']['row']) df.loc[j] = [i, df_temp['RIDE_PASGR_NUM'].sum(), df_temp['ALIGHT_PASGR_NUM'].sum()] print(i,j) #이것은 작동이 잘되는지 보려고 임시로 넣은 줄 j=j+1 저장한 데이터를 시각화하기 데이터는 준비가 끝났다. 이제 이것을 그래프로 그려보자.\n우선 데이터 형태를 살펴보면, 아래와 같다. 날짜를 인덱스로 만들자. 아래 명령을 실행하면, ‘DATE’ 칼럼이 인덱스로 지정되고, 위 그림과 아래 그림처럼 표의 모양이 살짝 바뀐다.\n1 df_concat.set_index('DATE') 아래 명령어로 X축은 ‘DATE’로된 그래프를 쉽게 그릴 수 있다.\n1 df.plot('DATE') 이걸 조금 응응해 보면, 2019년과 2020년의 지하철 승하차 인원 비교를 해볼 수 있다. 3월, 4월, 5월 평균 이용객수가 각각 전년동월 대비 -40.3%, -36.8%, -32.2%다. 6월은 6월 10일까지 -16.2% 수준인데, 평일에 비해서 주말에 지하철 이용객 수가 현저하게 작으므로 주말효과가 반영되어 덜 감소한 것으로 보인다. 최악의 수준에서는 회복 중이지만, 수도권 지역감염에 대한 우려가 커지고 있어 작년 수준을 회복하기는 쉽지 않을 것임을 예고하고 있다.\n나가며 서울시 공공데이터포털의 데이터 속보성이 생각보다 괜찮다. 글을 작성하는 6월 13일에 6월 10일까지의 지하철 이용객수가 오픈 API로 접근 가능했다. 이정도 수치면, 실시간으로 모니터링하는 웹사이트나 앱을 간단히 만들어서 코로나19에 대한 사람들의 우려 수준을 가늠해 보는데 활용해 볼 수도 있을 것 같다. 마찬가지로, 버스 이용량, 고속도로 통행량, 시내도로 통행속도, 따릉이 이용실적 등등 코로나19 이후 달라지고 있는 이동패턴을 공공데이터포털에 올라는 데이터를 이용해서 살펴볼 수 있을 것으로 보인다.\n",
  "wordCount" : "1065",
  "inLanguage": "en",
  "image": "//localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished": "2020-06-13T21:36:00+09:00",
  "dateModified": "2025-06-20T23:12:00Z",
  "author":{
    "@type": "Person",
    "name": "Gunn Kim"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "//localhost:1313/posts/2020-06-13-seoul-metro-data-openapi/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "//localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="Home (Alt + H)">
                <img src="//localhost:1313/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/posts/" title="posts">
                    <span>posts</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="//localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="//localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기
    </h1>
    <div class="post-meta"><span title='2020-06-13 21:36:00 +0900 KST'>June 13, 2020</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;1065 words&nbsp;·&nbsp;Gunn Kim

</div>
  </header> 
  <div class="post-content"><p>공공데이터 포털를 활용할 일들이 많아지고 있다. 몇해 전부터 정부와 지자체에서 열심히 데이터를 공개해주고 있어서 이를 쏠쏠하게 활용해볼 수 있다. 오픈API로 데이터를 불러서 데이터프레임에만 데이터를 잘 쌓아놓으면 이래저래 활용하기가 매우 쉬워진다.</p>

<img src="featured49-37.png" alt="" />

<p>오늘은 서울시 공공데이터 포털인 <a href="https://data.seoul.go.kr" >&lsquo;서울 열린데이터 광장&rsquo;</a>
에서 지하철 승하차 인원 정보를 불러와서 코로나 이후 지하철 이용이 어떻게 변했는지 알아보자.</p>
<blockquote>
<p>참고로 공공데이터포털에는 한국정보화진흥원에서 운영하는 정부 공식 <a href="https://www.data.go.kr" >&lsquo;공공데이터포털&rsquo;</a>
도 있고, 통계청에서 운영하는 <a href="https://kosis.kr/openapi/index/index.jsp" >Kosis 공유서비스</a>
, <a href="https://ecos.bok.or.kr" >한국은행 Ecos</a>
 등등 엄청 많다.</p>
</blockquote>
<p>전체 흐름은 다음과 같다.</p>
<ol>
<li>회원가입 및 일반인증키 신청</li>
<li>오픈API로 데이터 불러오기</li>
<li>불러온 데이터를 데이터프레임에 저장하기</li>
<li>for 루프문으로 원하는 기간의 데이터를 데이터프레임에 저장하기</li>
<li>필요한 값의 시계열만 데이터프레임에 저장하기</li>
<li>저장한 데이터를 시각화하기</li>
</ol>

<div class="adsense-container">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
       data-ad-slot="YOUR_AD_SLOT"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

<h2 id="회원가입-및-일반인증키-신청">회원가입 및 일반인증키 신청<a hidden class="anchor" aria-hidden="true" href="#회원가입-및-일반인증키-신청">#</a></h2>
<p>일단 서울 열린데이터 광장에서 회원가입 후에 오픈API를 이용할 수 있는 인증키를 발급받자. 회원가입-일반인증키 신청의 2단계만 거치면 완료된다.</p>
<ul>
<li>서울 열린데이터 광장 : <a href="https://data.seoul.go.kr/" >https://data.seoul.go.kr/</a>
</li>
</ul>
<h2 id="오픈api로-데이터-불러오기">오픈API로 데이터 불러오기<a hidden class="anchor" aria-hidden="true" href="#오픈api로-데이터-불러오기">#</a></h2>
<blockquote>
<p>[참고] Colab(코랩) 파이썬 코드 예제 바로가기 :</p>
<blockquote>
<p><a href="






  


/
" >[파이썬/colab] 공공데이터 Open API를 이용한 지하철 승차인원 구하기 예제코드</a>
</p>
</blockquote>
</blockquote>
<p>오픈API로 데이터를 불러오기 위해서 사용할 라이브러리를 불러온다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-py3" data-lang="py3"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">urllib.request</span> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span> 
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> 
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p>이어서 오픈API url로 데이터를 불러온다. <a href="https://data.seoul.go.kr/dataList/OA-12914/S/1/datasetView.do" >&lsquo;서울 지하철호선별 역별 승하차 인원 정보&rsquo;</a>
에 가면 샘플 url이 있는데, 이를 이용해서 원하는 날짜의 데이터를 불러올 수 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">기본 형태는 아래와 같다.
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/(인증키)/json/CardSubwayStatsNew/1/1000/20200601
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">인증키에 앞서 받아온 인증키를 넣으면 된다. 인증키를 감싸고 있는 () 괄호는 빼야한다.
</span></span><span class="line"><span class="cl">인증키가 123yourkeyhere라고하면, url은 아래와 같다.
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/123yourkeyhere/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">인증키 다음에는 받아올 데이터의 형태를 지정하는 것인데, xml, xls, json 중에서 결정할 수 있는데, 
</span></span><span class="line"><span class="cl">여기서는 json을 사용하였다.
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/123yourkeyhere/json/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">json 다음에 있는 것이 불러올 데이터의 테이블명이다. 지하철 승하차 인원 테이블은 &#39;CardSubwayStatsNew&#39;이다.
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">테이블명 다음의 숫자 1과 숫자 1000은 한번에 불러올 데이터 행의 시작과 끝번호이다. 
</span></span><span class="line"><span class="cl">서울시 지하철 모든 노선의 역(서울시 소재, 2020년 6월 현재 기준)의 갯수가 
</span></span><span class="line"><span class="cl">589개니까 1과 1000으로 지정하면 무방하다.
</span></span><span class="line"><span class="cl">(참고로 서울시 열린데이터 광장의 오픈 API로 한번에 부를 수 있는 행의 수는 1000개다. 
</span></span><span class="line"><span class="cl">가령, 1행에서 3000행을 한번에 부르게 된다면 에러난다.)
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">숫자 1과 숫자 1000 다음에 나오는 날짜는 데이터를 불러올 날짜다. YYYYMMDD 형태로 불러올 수 있다.
</span></span><span class="line"><span class="cl">2020년 6월 1일의 서울시 전체 지하철역 승하차 인원을 불러오기 위해서는 아래 url을 입력하면 된다.
</span></span><span class="line"><span class="cl">(인증키는 본인의 인증키를 입력해야 한다.)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">최종 완성본 url: 
</span></span><span class="line"><span class="cl">http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601
</span></span></code></pre></td></tr></table>
</div>
</div>
<div class="adsense-container">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-YOUR_AD_CLIENT_ID"
       data-ad-slot="YOUR_AD_SLOT"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>

<h2 id="불러온-데이터를-데이터프레임에-저장하기">불러온 데이터를 데이터프레임에 저장하기<a hidden class="anchor" aria-hidden="true" href="#불러온-데이터를-데이터프레임에-저장하기">#</a></h2>
<p>최종 완성된 url을 가지고 데이터를 불러와서 이를 다루기 쉽도록 데이터프레임에 저장해 보자.
데이터프레임을 위해서 판다스(pandas) 라이브러리는 맨 앞에서 불러왔었다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># url 변수에 최종 완성본 url을 넣자</span>
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># url을 불러오고 이것을 인코딩을 utf-8로 전환하여 결과를 받자.</span>
</span></span><span class="line"><span class="cl"><span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="n">json_str</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 받은 데이터가 문자열이라서 이를 json으로 변환한다.</span>
</span></span><span class="line"><span class="cl"><span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>이제 json 형태로 받아진 데이터를 판다스에 저장하자.
먼저, json_object를 실행해 보면, 아래와 같이 나타난다.

<img src="featured36-40.png" alt="" />

</p>
<p>위의 데이터에서 필요한 데이터는 &lsquo;CardSubwayStatsNew&rsquo;의 하위에 있는 &lsquo;row&rsquo;에 있음을 확인할 수 있다.
이제 row에 해당하는 데이터를 데이터프레임으로 불러와 보자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># [&#39;CardSubwayStatsNew&#39;][&#39;row&#39;]를 데이터프레임 df로 불러오는 것은 아래와 같다.
</span></span><span class="line"><span class="cl">df=pd.json_normalize(json_object[&#39;CardSubwayStatsNew&#39;][&#39;row&#39;])
</span></span></code></pre></td></tr></table>
</div>
</div><p>df를 부르면 아래와 같이 저장된 것을 볼 수 있다.

<img src="featured37-54.png" alt="" />

</p>
<p>여기까지 한것을 한번 모아서 보자. 총 5줄이다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/20200601&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl"><span class="n">json_str</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">json_object</span><span class="p">[</span><span class="s1">&#39;CardSubwayStatsNew&#39;</span><span class="p">][</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="for-루프문으로-원하는-기간의-데이터를-데이터프레임에-저장하기">for 루프문으로 원하는 기간의 데이터를 데이터프레임에 저장하기<a hidden class="anchor" aria-hidden="true" href="#for-루프문으로-원하는-기간의-데이터를-데이터프레임에-저장하기">#</a></h2>
<p>지하철 이용객의 변화를 보기 위해서는 시계열을 살펴봐야 한다. 위에서 하루치 데이터를 데이터프레임으로 불러왔는데, 이것을 원하는 기간에 저장하도록 만들어 보자.</p>
<p>먼저, 원하는 기간의 날짜를 리스트에 넣어야 한다. 판다스를 이용해서 간단하게 할 수 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 2020년 1월 20일부터 2020년 2월 5일까지 데이터를 불러온다고 하자. 
</span></span><span class="line"><span class="cl">dt_index = pd.date_range(start=&#39;20200120&#39;, end=&#39;20200205&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div><p>dt_index는 아래와 같다.

<img src="featured44-49.png" alt="" />

</p>
<p>이것을 리스트로 변환하자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">dt_list = dt_index.strftime(&#34;%Y%m%d&#34;).tolist()
</span></span></code></pre></td></tr></table>
</div>
</div><p>결과는 아래와 같다.

<img src="featured46-33.png" alt="" />

</p>
<p>이제 for 문을 날짜 리스트에 따라 돌려가며 부르면 된다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">dt_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;20200120&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;20200205&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">dt_list</span> <span class="o">=</span> <span class="n">dt_index</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&#34;%Y%m</span><span class="si">%d</span><span class="s2">&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># for 문으로 하루치 데이터 부르는 작업을 리스트에 저장된 기간에 반복한다.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># url을 바꿔가면서 데이터를 부르기 위해서 url의 끝부문 날짜에 변수 i를 넣어준다.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 불러온 데이터를 append 메소드를 이용하여 데이터프레임 하단에 붙인다.</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dt_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/&#34;</span> <span class="o">+</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="n">json_str</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">df_temp</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">json_object</span><span class="p">[</span><span class="s1">&#39;CardSubwayStatsNew&#39;</span><span class="p">][</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_temp</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>[주의]
for 문을 돌리기 전에 데이터를 불여넣을 데이터프레임 df를 하나 만들어 두자. 하루치 데이터를 불러온 작업을 for 문 돌리기 전에 한번 실행해 놓으면 된다. 또는 생성되는 칼럼에 맞게 하나 만들면 된다. 데이터프레임 만드는 것은 아래 섹션에 추가하였다. 이것을 안하면 df가 없다고 에러가 뜬다.</p>
</blockquote>
<p>이제 2020년 1월 20일부터 2020년 2월 5일까지 서울 지하철 이용객 수를 확인해 보자.</p>

<img src="featured59-02.png" alt="" />

<p>데이터가 잘 불러져서 데이터프레임에 차곡차곡 쌓여있는걸 볼 수 있다.</p>
<h2 id="필요한-값의-시계열만-데이터프레임에-저장하기">필요한 값의 시계열만 데이터프레임에 저장하기<a hidden class="anchor" aria-hidden="true" href="#필요한-값의-시계열만-데이터프레임에-저장하기">#</a></h2>
<p>하루치 데이터만 해도 500행이 넘어가니 1월 20일~2월 5일 데이터만 불러도 시간이 조금 소요된다.
그래서 위 루프문 돌릴때 필요한 노선이나 역을 기준으로 데이터를 뽑아서 저장할 수도 있고, 하루 전체 승하차 인원 합을 구해서 저장해도 된다.</p>
<p>애초에 필요한 것이 노선과 역에 관계없이 서울시 지하철 하루 이용객수 추이다. 데이터프레임에 저장할 때, 하루치 인원 합을 구해서 저장해 보자.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 일간 서울시 지하철 전체 승차, 하차 인원의 합을 구하는 명령어는 다음과 같다.
</span></span><span class="line"><span class="cl">df_temp[&#39;RIDE_PASGR_NUM&#39;].sum()
</span></span><span class="line"><span class="cl">df_temp[&#39;ALIGHT_PASGR_NUM&#39;].sum()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 이것을 df.loc[j]를 이용해서 df라는 데이터프레임에 일별로 하나씩 차곡차곡 쌓도록 했다.
</span></span><span class="line"><span class="cl">df.loc[j] = [i, df_temp[&#39;RIDE_PASGR_NUM&#39;].sum(), df_temp[&#39;ALIGHT_PASGR_NUM&#39;].sum()]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># for 루프문 돌기 전에 빈 데이터프레임을 하나 만들어줬다.
</span></span><span class="line"><span class="cl">df = pd.DataFrame({&#39;DATE&#39;:[], &#39;RIDE&#39;:[], &#39;ALIGHT&#39;:[]})
</span></span></code></pre></td></tr></table>
</div>
</div><p>위 내용을 정리하면 다음과 같다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">dt_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;20200120&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;20200205&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">dt_list</span> <span class="o">=</span> <span class="n">dt_index</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&#34;%Y%m</span><span class="si">%d</span><span class="s2">&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;DATE&#39;</span><span class="p">:[],</span> <span class="s1">&#39;RIDE&#39;</span><span class="p">:[],</span> <span class="s1">&#39;ALIGHT&#39;</span><span class="p">:[]})</span>
</span></span><span class="line"><span class="cl"><span class="n">j</span><span class="o">=</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dt_list</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;http://openapi.seoul.go.kr:8088/123yourkeyhere/json/CardSubwayStatsNew/1/1000/&#34;</span> <span class="o">+</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">    <span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">    <span class="n">json_str</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">json_object</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">json_object</span><span class="p">[</span><span class="s1">&#39;CardSubwayStatsNew&#39;</span><span class="p">][</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">df_temp</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">json_normalize</span><span class="p">(</span><span class="n">json_object</span><span class="p">[</span><span class="s1">&#39;CardSubwayStatsNew&#39;</span><span class="p">][</span><span class="s1">&#39;row&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">df_temp</span><span class="p">[</span><span class="s1">&#39;RIDE_PASGR_NUM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">df_temp</span><span class="p">[</span><span class="s1">&#39;ALIGHT_PASGR_NUM&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()]</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="c1">#이것은 작동이 잘되는지 보려고 임시로 넣은 줄</span>
</span></span><span class="line"><span class="cl">    <span class="n">j</span><span class="o">=</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="저장한-데이터를-시각화하기">저장한 데이터를 시각화하기<a hidden class="anchor" aria-hidden="true" href="#저장한-데이터를-시각화하기">#</a></h2>
<p>데이터는 준비가 끝났다. 이제 이것을 그래프로 그려보자.</p>
<p>우선 데이터 형태를 살펴보면, 아래와 같다.

<img src="featured10-32.png" alt="" />

</p>
<p>날짜를 인덱스로 만들자. 아래 명령을 실행하면, &lsquo;DATE&rsquo; 칼럼이 인덱스로 지정되고, 위 그림과 아래 그림처럼 표의 모양이 살짝 바뀐다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">df_concat.set_index(&#39;DATE&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div>
<img src="featured12-01.png" alt="" />

<p>아래 명령어로 X축은 &lsquo;DATE&rsquo;로된 그래프를 쉽게 그릴 수 있다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">df.plot(&#39;DATE&#39;)
</span></span></code></pre></td></tr></table>
</div>
</div>
<img src="featured15-52.png" alt="" />

<p>이걸 조금 응응해 보면,
2019년과 2020년의 지하철 승하차 인원 비교를 해볼 수 있다.

<img src="featured17-01.png" alt="" />

</p>
<p>3월, 4월, 5월 평균 이용객수가 각각 전년동월 대비 -40.3%, -36.8%, -32.2%다. 6월은 6월 10일까지 -16.2% 수준인데, 평일에 비해서 주말에 지하철 이용객 수가 현저하게 작으므로 주말효과가 반영되어 덜 감소한 것으로 보인다. 최악의 수준에서는 회복 중이지만, 수도권 지역감염에 대한 우려가 커지고 있어 작년 수준을 회복하기는 쉽지 않을 것임을 예고하고 있다.</p>
<h2 id="나가며">나가며<a hidden class="anchor" aria-hidden="true" href="#나가며">#</a></h2>
<p>서울시 공공데이터포털의 데이터 속보성이 생각보다 괜찮다. 글을 작성하는 6월 13일에 6월 10일까지의 지하철 이용객수가 오픈 API로 접근 가능했다. 이정도 수치면, 실시간으로 모니터링하는 웹사이트나 앱을 간단히 만들어서 코로나19에 대한 사람들의 우려 수준을 가늠해 보는데 활용해 볼 수도 있을 것 같다. 마찬가지로, 버스 이용량, 고속도로 통행량, 시내도로 통행속도, 따릉이 이용실적 등등 코로나19 이후 달라지고 있는 이동패턴을 공공데이터포털에 올라는 데이터를 이용해서 살펴볼 수 있을 것으로 보인다.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/python/">Python</a></li>
      <li><a href="//localhost:1313/tags/openapi/">Openapi</a></li>
      <li><a href="//localhost:1313/tags/opendata/">Opendata</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="//localhost:1313/posts/colab%EC%BD%94%EB%9E%A9%EC%97%90%EC%84%9C-kogpt-%EC%8B%A4%ED%96%89/">
    <span class="title">« Prev</span>
    <br>
    <span>Colab(코랩)에서 KoGPT 실행</span>
  </a>
  <a class="next" href="//localhost:1313/posts/python-coding-typos-learning/">
    <span class="title">Next »</span>
    <br>
    <span>[파이썬] 코딩, 나를 키운 건 팔할이 오타다</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on x"
            href="https://x.com/intent/tweet/?text=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0&amp;url=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f&amp;hashtags=Python%2copenapi%2copendata">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f&amp;title=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0&amp;summary=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0&amp;source=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on reddit"
            href="https://reddit.com/submit?url=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f&title=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on whatsapp"
            href="https://api.whatsapp.com/send?text=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0%20-%20%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on telegram"
            href="https://telegram.me/share/url?text=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0&amp;url=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share [파이썬] 서울 공공데이터 포털 Open API를 이용해서 지하철 승차인원수 구하기 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%5b%ed%8c%8c%ec%9d%b4%ec%8d%ac%5d%20%ec%84%9c%ec%9a%b8%20%ea%b3%b5%ea%b3%b5%eb%8d%b0%ec%9d%b4%ed%84%b0%20%ed%8f%ac%ed%84%b8%20Open%20API%eb%a5%bc%20%ec%9d%b4%ec%9a%a9%ed%95%b4%ec%84%9c%20%ec%a7%80%ed%95%98%ec%b2%a0%20%ec%8a%b9%ec%b0%a8%ec%9d%b8%ec%9b%90%ec%88%98%20%ea%b5%ac%ed%95%98%ea%b8%b0&u=%2f%2flocalhost%3a1313%2fposts%2f2020-06-13-seoul-metro-data-openapi%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="//localhost:1313/">My Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
